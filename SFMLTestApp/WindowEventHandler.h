#pragma once

#include <SFML/Graphics.hpp>
#include "Identifier.h"
#include <memory>

class Challenge;

//////////////////////////////////////////////////////////////////////////
class WindowEventHandler : public std::enable_shared_from_this<WindowEventHandler>
{
public:
	std::shared_ptr<sf::RenderWindow> m_window;
	std::string m_name;
	std::shared_ptr<sf::Vector2i> m_position;
	std::shared_ptr<sf::Vector2u> m_size;
	bool m_running;
	bool m_created;
	Identifier m_index;

	std::shared_ptr<Challenge> m_challenge;

	//////////////////////////////////////////////////////////////////////////
	WindowEventHandler(std::string name, Identifier _index = Identifier());

	//////////////////////////////////////////////////////////////////////////
	void setWindowStyle_fromConfigurationFile();

	//////////////////////////////////////////////////////////////////////////
	void Initialize();

	//////////////////////////////////////////////////////////////////////////
	void Create();

	//////////////////////////////////////////////////////////////////////////
	void EventLoop();

	//////////////////////////////////////////////////////////////////////////
	void close();

	//////////////////////////////////////////////////////////////////////////
	void Draw();

	//////////////////////////////////////////////////////////////////////////
	void setChallenge(std::shared_ptr<Challenge> _challenge);

};